@using SSKD.Models;
@{
    ViewBag.Title = "Index";
    var dict = Model != null ? (Dictionary<string, object>)Model : new Dictionary<string, object>();
    var data_Type = dict.ContainsKey("data_Type") ? dict["data_Type"].ToString() : "";
    var data_ListOrderProduct = DefaultView.ListOrderProduct();
}


<table border="0" width="100%" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td align="center">
                <table border="0" width="1000" cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr>
                            <td valign="top" style="padding-top: 15px" width="210">
                                <table border="0" width="100%" cellspacing="0" cellpadding="0">
                                    <tbody>
                                        <tr>
                                            <td>　</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" height="130">
                                                <img border="0" src="@Url.Content("~/images/layer/leftmenu01.gif")" width="210" height="208">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                            <td valign="top" style="padding-top: 15px" width="40">　</td>
                            <td valign="top" style="padding-top: 15px;padding-bottom: 30px" width="750" height="600">
                                <table border="0" width="100%" cellspacing="0" cellpadding="0">

                                    <tbody>
                                        <tr>
                                            <td>



                                                <table border="0" width="750" cellspacing="0" cellpadding="0">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <span class="titlePage">@data_Type</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>




                                                <div align="center">
                                                    <table width="700" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td width="15"></td><td><br></td></tr></tbody></table><table width="700" border="0" cellspacing="0" cellpadding="0">
                                                        <tbody>
                                                            <tr id="data_productlist"></tr>
                                                            <tr></tr>
                                                            <tr>
                                                                <td colspan="4">
                                                                    <table width="100%" border="0">

                                                                        <tbody>
                                                                            <tr>
                                                                                <td height="4" bgcolor="#E7E6DF"></td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td height="10"></td>
                                                                            </tr>

                                                                            <!------- 페이지 넘버 시작 ------->
                                                                            <tr>
                                                                                <td align="center">
                                                                                    @*<a href="bbs.php?page=1&amp;bbstable=jepumso2&amp;sss_key=&amp;ttt_key=&amp;categori11=deskpad">
                                                                    <font color=""><img src="bbs/icon/ico_first_off.gif" border="0" align="absmiddle"></font>
                                                                </a>
                                                                &nbsp;
                                                                <a href="bbs.php?page=1&amp;bbstable=jepumso2&amp;sss_key=&amp;ttt_key=&amp;categori11=deskpad">
                                                                    <img src="bbs/icon/ico_prev_off.gif" border="0" align="absmiddle">
                                                                </a>

                                                                <a href="bbs.php?page=1&amp;bbstable=jepumso2&amp;sss_key=&amp;ttt_key=&amp;categori11=deskpad">
                                                                    <img src="bbs/icon/ico_next_off.gif" border="0" align="absmiddle">
                                                                </a>
                                                                &nbsp;&nbsp;
                                                                <a href="bbs.php?page=1&amp;bbstable=jepumso2&amp;sss_key=&amp;ttt_key=&amp;categori11=deskpad">
                                                                    <font color="">
                                                                        <img src="bbs/icon/ico_end_off.gif" border="0" align="absmiddle">
                                                                    </font>
                                                                </a>&nbsp;*@

                                                                                    <span>
                                                                                        <button id="btnfindfirst" onclick="showfirst()" style="background-color:transparent;border:none;"><font color=""><img src="@Url.Content("~/bbs/icon/ico_first_off.gif")" border="0" align="absmiddle"></font></button>
                                                                                        &nbsp;
                                                                                        <font color="">[<font color="red"><b id="pageNum" >1</b></font>]</font>
                                                                                        &nbsp;
                                                                                        <button id="btnshowmore" onclick="showmore()" style="background-color:transparent;border:none;"><font color=""><img src="@Url.Content("~/bbs/icon/ico_next_off.gif")" border="0" align="absmiddle"></font></button>
                                                                                    </span>

                                                                                </td>
                                                                            </tr>
                                                                            <!------- 페이지 넘버 종료 ------->
                                                                            <tr>
                                                                                @*<td align="right"><!----><a href="bbs.php?bbstable=jepumso2&amp;call=write&amp;jcode=&amp;jname=&amp;categoriname=&amp;categori11=deskpad"><img src="img/icon/wri.gif" border="0"></a></td>*@
                                                                            </tr>

                                                                            <tr>
                                                                                <td valign="top">&nbsp;</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td valign="top">&nbsp;</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div><br><br>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

<script id="ProductItemTemplate" type="text/x-jquery-tmpl">
    <td align="center" height="200" valign="top" width="175">
        <p style="margin-top: 3px; margin-bottom: 3px">
            <a href="${UrlAction}"><img src="${ProductImg}" width="150" height="150" style="border: 1px solid #C0C0C0; padding: 0"></a>
        </p>
        <p style="margin-top: 5px; margin-bottom: 5px"><b><font color="black">${ProductName}</font></b></p>
    </td>
</script>
<form id="frmsearchpaging">

    <input type="hidden" id="pagenum" value="1" />
    <input type="hidden" id="pagesize" value="4" />
    <input type="hidden" id="entryid" value="@data_Type" />
    <input type="hidden" id="orderby" value="@data_ListOrderProduct[0].ID" />
    <input type="hidden" id="totalpage" value="0" />

</form>

<script>
        jQuery(document).ready(function () {
            doSearch();

    });

    //jQuery(".woocommerce-ordering select").change(function () {
    //    var pagenum = 1;
    //    jQuery("#frmsearchpaging #pagenum").val(pagenum);
    //    jQuery("#frmsearchpaging #orderby").val(jQuery(this).val());
    //    $('#btnshowmore').prop("disabled", false);
    //    var tmp2 = $("ul.product-list.clearfix.columns-3").empty();
    //    $('body').scrollTop(0);
    //    doSearch();

    //});
    function showfirst() {
        var pagenum = 1;
        jQuery("#frmsearchpaging #pagenum").val(pagenum);
        //jQuery("#frmsearchpaging #orderby").val(jQuery(this).val());
        $('#btnshowmore').prop("disabled", false);
        var tmp2 = $("#data_productlist").empty();
        doSearch();
    }
        function showmore() {
            var pagesize = jQuery("#frmsearchpaging #pagesize").val();
            var pagenum = jQuery("#frmsearchpaging #pagenum").val();
            var totalpage = jQuery("#frmsearchpaging #totalpage").val();
            var pagemax = parseInt(totalpage) / parseInt(pagesize)   + 1;
            if ((pagenum < pagemax)) {
                pagenum = parseInt(pagenum) + 1;
                jQuery("#frmsearchpaging #pagenum").val(pagenum);
                doSearch();
            }
            else {
                $('#btnshowmore').prop("disabled", true);
            }
    }

        function doSearch() {
        //if (!jQuery("#frmsearchpaging #orderby").val()) jQuery("#frmsearchpaging #orderby").val(jQuery(".woocommerce-ordering select").val());
        var dataPost = {
            id: jQuery("#frmsearchpaging #entryid").val()
            , pagenum: jQuery("#frmsearchpaging #pagenum").val()
            , pagesize: jQuery("#frmsearchpaging #pagesize").val()
            , orderby: jQuery("#frmsearchpaging #orderby").val()
            //, sorttype: jQuery("#frmsearchpaging #sorttype").val()
        };
        var r = '@Html.Raw(@Request.Url.GetLeftPart(UriPartial.Authority) + Url.Content("~"))';
        /**/
        jQuery.post(r + "Product/Read", dataPost, function (data) {
        /**/
            //var tmp = $(".row list-product-row");
            var tmp2 = $("#data_productlist");
            tmp2.empty();
            for (var i = 0; i < data.dataresult.length; i++) {
                var tmpr = '@Url.Action("Detail", "Product")';
                data.dataresult[i].UrlAction = tmpr + '?id=' + data.dataresult[i].ProductId;
                 @*tmpr = '@Url.Action("AddItemToBill", "Bill")';
                data.dataresult[i].BillUrlAction = tmpr + '?ProductId=' + data.dataresult[i].ProductId;*@
                
                var template = $('#ProductItemTemplate').tmpl(data.dataresult[i]);
                tmp2.append(template);
            }

            if (data && data.total)
                jQuery("#frmsearchpaging #totalpage").val(data.total);

            $('#pageNum').text(jQuery("#frmsearchpaging #pagenum").val());

    });
    }
    function GetNumber(value) {
        return value.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
    }
</script>
